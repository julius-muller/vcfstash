cleanup = true

workDir = '/mnt/data/samples/ephemeral/nextflow_tmp'

params {
    // Input/Output
    input = null    // Path to the input VCF file
    output = null   // Directory to store output files
	db_bcf = null  // Path to the database BCF file

    // Resource files
    chr_add = '/mnt/data/samples/chr_add.txt'
    reference = '/mnt/data/resources/reference/ucsc/hg19_canonical.fa.gz'
    vep_cache = '/mnt/data/apps/ensembl-vep/113/cachedir/'
	vep_max_chr_parallel = 4
	vep_max_forks = 4

    // Tool paths and containers
    vep_container = '/mnt/data/apps/ensembl-vep/113/vep.sif'
    echtvar_path = '/mnt/data/apps/echtvar/echtvar'

    // Annotation resources
    echtvar_resources = [
        '/mnt/data/resources/gnomad/vep_gnomad_v4_hg19_genomes/echtvar_vep_gnomad4.1_genome_hg19lo.zip',
        '/mnt/data/resources/gnomad/vep_gnomad_v4_hg19_exomes/echtvar_vep_gnomad4.1_exome_hg19lo.zip',
        '/mnt/data/resources/clinvar/vcf_GRCh37/clinvar_20241111_hg19.zip'
    ]

    // Workflow control
    db_mode = false
}

process {
    executor = 'local'
    cpus = 30
    memory = '60 GB'

    scratch = '/mnt/data/samples/ephemeral/scratch'

    withName: 'RenameAndNormalizeVCF' {
        scratch = '/mnt/data/samples/ephemeral/scratch'
        disk = '20 GB'
    }

    withName: 'VEPAnnotate' {
        scratch = '/mnt/data/samples/ephemeral/scratch'
        disk = '20 GB'
    }

    withName: 'EchtvarAnnotateChr' {
        scratch = '/mnt/data/samples/ephemeral/scratch'
        disk = '50 GB'
    }
}

// Singularity configuration
singularity {
    enabled = true
    autoMounts = true
}

env {
    TMPDIR = '/mnt/nfs-share/scratch'
}

cleanup = true
